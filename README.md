# Boat API

## Описание проекта

Проект представляет собой API и веб-приложение для моделирования работы весельной лодки (`Rowboat`). API предоставляет методы управления лодкой, включая перемещение, управление пассажирами и смену направления движения. Веб-интерфейс позволяет взаимодействовать с лодкой в браузере.

## Структура проекта

```
boat_api/
│
├── src/
│   ├── models/
│   │   ├── boat.py         # Базовый класс лодки
│   │   ├── rowboat.py      # Класс весельной лодки
│   ├── utils/
│   │   ├── helpers.py      # Вспомогательные функции
│   │   ├── logger.py       # Настройка логирования
│   ├── api/
│   │   ├── endpoints.py    # API маршруты для лодки
│   ├── web/
│   │   ├── templates/
│   │   │   ├── index.html  # Основная страница
│   │   ├── static/
│   │   │   ├── app.py      # Логика фронтенда на Python
│   │   ├── server.py       # Запуск веб-приложения
│
├── tests/
│   ├── api/
│   │   ├── test_api.py     # Тесты для API
│   │   ├── conftest.py     # Фикстуры для API-тестов
│   ├── web/
│   │   ├── test_web.py     # Тесты для веб-приложения (Selenium)
│   │   ├── conftest.py     # Фикстуры для веб-тестов
│
├── reports/                # Папка для Allure отчетов
│
├── requirements.txt        # Список зависимостей
├── README.md               # Описание проекта
└── pyproject.toml          # Конфигурация установки
```

## Установка

1. Клонировать репозиторий:
   ```bash
   git clone https://github.com/Checamaro/boat_api
   ```
2. Установить зависимости:
   ```bash
   pip install -r requirements.txt
   ```

## Запуск API и веб-приложения

### Запуск API:
```bash
uvicorn src.api.endpoints:app --host 127.0.0.1 --port 5000 --reload
```
API будет доступно по адресу: [http://127.0.0.1:5000/docs#/](http://127.0.0.1:5000/docs#/)

### Запуск веб-приложения:
```bash
python src/web/server.py
```
Открыть браузер: [http://127.0.0.1:8001](http://127.0.0.1:8001)

## Запуск тестов с логированием и отчетами Allure

```bash
pytest tests/ --alluredir=reports/
allure serve reports/
```

## Тест-кейсы

### 1. API тест-кейсы

#### TC-API-001: Перемещение лодки

**Описание:** Проверить корректность перемещения лодки через API.

**Шаги:**
1. Отправить POST-запрос на `/move/forward`.
2. Проверить статус-код ответа.
3. Проверить сообщение в ответе.

**Ожидаемый результат:**
- Статус-код 200.
- Ответ содержит сообщение: `Boat moved forward`.

#### TC-API-002: Остановка лодки

**Описание:** Проверить корректность остановки лодки через API.

**Шаги:**
1. Отправить POST-запрос на `/stop`.
2. Проверить статус-код ответа.
3. Проверить сообщение в ответе.

**Ожидаемый результат:**
- Статус-код 200.
- Ответ содержит сообщение: `Boat stopped`.

#### TC-API-003: Добавление пассажира

**Описание:** Проверить возможность добавления пассажира через API.

**Шаги:**
1. Отправить POST-запрос на `/passenger/add`.
2. Проверить статус-код ответа.

**Ожидаемый результат:**
- Статус-код 200.

#### TC-API-004: Удаление пассажира

**Описание:** Проверить возможность удаления пассажира через API.

**Шаги:**
1. Отправить POST-запрос на `/passenger/remove`.
2. Проверить статус-код ответа.

**Ожидаемый результат:**
- Статус-код 200.

### 2. Веб-тесты

#### TC-WEB-001: Проверка управления лодкой через UI

**Описание:** Проверить корректность работы элементов управления в веб-интерфейсе.

**Шаги:**
1. Открыть веб-приложение.
2. Нажать кнопку `Move Forward`.
3. Подождать 2 секунды.
4. Нажать кнопку `Stop`.
5. Подождать 2 секунды.
6. Закрыть браузер.

**Ожидаемый результат:**
- Лодка двигается вперед после нажатия `Move Forward`.
- Лодка останавливается после нажатия `Stop`.

